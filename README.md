# iTime - 时间记录应用

一个简洁优雅的iOS时间记录应用，帮助你追踪每天的时间使用情况。

## 功能特性

### 时间记录
- 按类别组织事件（工作、学习、娱乐、运动、休息等）
- 自定义事件名称和颜色
- 一键开始/停止/切换事件计时
- 自动过滤短时间记录（可设置最小有效时长）

### 统计分析
- 多维度时间统计（日/周/月/年）
- 可视化图表展示时长分布
- 事件分类统计和百分比分析
- 详细记录列表查看

### 智能提醒
- 单次事件超过1小时自动提醒
- 后台本地通知支持
- 每小时重复提醒

### 日历同步
- 自动同步有效记录到iOS日历
- 支持选择目标日历
- 完整的权限管理

### 数据同步
- iCloud自动同步
- 多设备数据共享

## 技术架构

### 核心技术栈
- **iOS 16+**
- **SwiftUI** - 现代化UI框架
- **SwiftData** - 数据持久化
- **Charts** - 原生图表展示
- **EventKit** - 日历集成
- **UserNotifications** - 本地通知

### 项目结构

```
iTime/
├── Models/              # 数据模型层
│   ├── EventCategory.swift    # 事件分类
│   ├── EventType.swift         # 事件类型
│   └── TimeRecord.swift        # 时间记录
├── ViewModels/          # 业务逻辑层
│   ├── TimerViewModel.swift
│   ├── StatisticsViewModel.swift
│   └── SettingsViewModel.swift
├── Views/               # 视图层
│   ├── MainTabView.swift
│   ├── Timer/           # 计时器模块
│   ├── Statistics/      # 统计模块
│   └── Settings/        # 设置模块
├── Services/            # 服务层
│   ├── CalendarService.swift
│   ├── NotificationService.swift
│   └── TimerService.swift
└── Utils/               # 工具类
    ├── Extensions.swift
    └── Constants.swift
```

### 数据模型

#### EventCategory（事件分类）
- 预设6大分类：工作、学习、娱乐、运动、休息、其他
- 自定义颜色和图标
- 级联删除关联事件类型

#### EventType（事件类型）
- 用户自定义事件名称
- 可选的自定义颜色
- 关联到分类

#### TimeRecord（时间记录）
- 记录开始/结束时间
- 计算持续时长
- 有效性标记
- 日历事件ID关联

## 使用说明

### 首次使用

1. **权限设置**
   - 进入"设置"标签
   - 授予通知权限（接收提醒）
   - 授予日历权限（同步记录）
   - 选择目标日历

2. **创建事件**
   - 在"时间"标签点击添加按钮
   - 输入事件名称
   - 选择分类
   - 可选择自定义颜色

### 记录时间

1. 点击事件卡片开始计时
2. 当前活动事件会高亮显示
3. 点击其他事件可切换
4. 再次点击当前事件或点击停止按钮结束计时

### 查看统计

1. 进入"统计"标签
2. 选择时间段（日/周/月/年）
3. 查看图表和分类统计
4. 点击"查看详细记录"查看所有记录

## 配置说明

### 最小有效时长
默认为5分钟，可在设置中调整（1-60分钟）。少于此时长的记录不会被保存。

### 日历同步
- 启用后，所有有效记录会自动同步到选中的日历
- 可选择"默认日历"或特定日历
- 同步的事件标题为事件类型名称

### 通知提醒
- 单次事件超过1小时后首次提醒
- 之后每小时提醒一次
- 需要授予通知权限

## 开发说明

### 环境要求
- Xcode 15+
- iOS 16+ 模拟器或真机
- Apple Developer账号（用于真机测试和iCloud）

### 运行项目
1. 克隆项目到本地
2. 使用Xcode打开 `iTime.xcodeproj`
3. 选择目标设备
4. 点击运行

### iCloud配置
项目已配置CloudKit支持，需要：
1. 在Xcode中登录Apple ID
2. 配置Bundle Identifier
3. 启用iCloud能力
4. 选择或创建CloudKit容器

## 代码规范

- 使用4空格缩进
- 关键逻辑添加中文注释
- MVVM架构模式
- 单一职责原则
- 避免过度抽象

## 许可证

MIT License

## 作者

Sean Zou - 2025

